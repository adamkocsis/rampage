<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Histogram examples • rampage</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Histogram examples">
<meta name="description" content="Ramps with base distribution plotting.
">
<meta property="og:description" content="Ramps with base distribution plotting.
">
<meta property="og:image" content="https://adamtkocsis.com/rampage/reference/figures/logo.png">
<meta property="og:image:alt" content="The rampage sticker.">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@atkocsis">
<meta name="twitter:site" content="@atkocsis">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rampage</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="../articles/installation.html">1. Installation</a></li>
    <li><a class="dropdown-item" href="../articles/topographies.html">2. Topographies</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-internals" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Internals</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-internals">
<li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/adamkocsis/rampage/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Histogram examples</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/adamkocsis/rampage/blob/HEAD/vignettes/rampage.Rmd" class="external-link"><code>vignettes/rampage.Rmd</code></a></small>
      <div class="d-none name"><code>rampage.Rmd</code></div>
    </div>

    
    
<p>The purpose of this utility package is to give full access to the
customization and calibration of color ramps in the R environment. The
resulting objects can be instantly passed to various plotting methods,
such those provided by <code>sf</code>, <code>terra</code> and
<code>fields</code> to mention a few. See some examples below and on the
package’s website: <a href="https://adamtkocsis.com/rampage/" class="uri">https://adamtkocsis.com/rampage/</a>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://adamtkocsis.com/rampage/">rampage</a></span><span class="op">)</span></span></code></pre></div>
<p>The package itself relies on <code><a href="https://rdrr.io/r/grDevices/colorRamp.html" class="external-link">grDevices::colorRampPalette</a></code>
function, which is used to linearly interpolate between colors that are
tied to specific values.</p>
<p>The basic functionality of the package can be combined with any
colors, either custom-selected or coming from a color ramp function. To
provide an example, <code>rampage</code> includes a simple 5-color ramp
called <code>gradinv</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gradinv</span></span>
<span><span class="co">#&gt; function (n) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     x &lt;- ramp(seq.int(0, 1, length.out = n))</span></span>
<span><span class="co">#&gt;     if (ncol(x) == 4L) </span></span>
<span><span class="co">#&gt;         rgb(x[, 1L], x[, 2L], x[, 3L], x[, 4L], maxColorValue = 255)</span></span>
<span><span class="co">#&gt;     else rgb(x[, 1L], x[, 2L], x[, 3L], maxColorValue = 255)</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x619ba32bde40&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: 0x619ba32b1580&gt;</span></span></code></pre></div>
<div class="section level2">
<h2 id="histograms">Histograms<a class="anchor" aria-label="anchor" href="#histograms"></a>
</h2>
<p>For the sake of a minimal demonstration, <code>rampage</code> can be
used to colorize bars of a histogram depending on their domain
(breakpoints). We can illustrate this with sample from a Gaussian
distribution:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">vals</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">50000</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="color-tiepoint-data-frame">Color tiepoint data frame<a class="anchor" aria-label="anchor" href="#color-tiepoint-data-frame"></a>
</h3>
<p>The definition of color ramps depend on the given colors
(<code>"color"</code>) and the the values they are tied to. In the
simplest case, we can use</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  z<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4</span>, <span class="fl">1</span>,  <span class="fl">6</span><span class="op">)</span>,</span>
<span>  color<span class="op">=</span><span class="fu"><a href="../reference/ramps.html">gradinv</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df</span></span>
<span><span class="co">#&gt;    z   color</span></span>
<span><span class="co">#&gt; 1 -4 #33358A</span></span>
<span><span class="co">#&gt; 2  1 #FFF99A</span></span>
<span><span class="co">#&gt; 3  6 #690720</span></span></code></pre></div>
<p>Using the default <code>z</code> and <code>color</code>
arguments:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/expand.html">expand</a></span><span class="op">(</span><span class="va">df</span>, n<span class="op">=</span><span class="fl">50</span><span class="op">)</span></span></code></pre></div>
<p>This <code>hist</code> function can be used with a set of breakpoints
(<code>breaks</code>) that are used to define the bars. The color of the
individual bars is vectorized, if exactly as many colors as many bars
are provided (number of breaks minus one), then the bars will be colored
accordingly.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">vals</span>, breaks<span class="op">=</span><span class="va">ex</span><span class="op">$</span><span class="va">breaks</span>, col<span class="op">=</span><span class="va">ex</span><span class="op">$</span><span class="va">col</span>, border<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span></code></pre></div>
<p><img src="rampage_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="more-breaks">More breaks<a class="anchor" aria-label="anchor" href="#more-breaks"></a>
</h3>
<p>The number of levels (breakpoints -1) is directly controled by
<code>n</code>. A finer resolution can be achieved with</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exMore</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/expand.html">expand</a></span><span class="op">(</span><span class="va">df</span>, n<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">vals</span>, breaks<span class="op">=</span><span class="va">exMore</span><span class="op">$</span><span class="va">breaks</span>, col<span class="op">=</span><span class="va">exMore</span><span class="op">$</span><span class="va">col</span>, border<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span></code></pre></div>
<p><img src="rampage_files/figure-html/unnamed-chunk-9-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="more-tiepoints">More tiepoints<a class="anchor" aria-label="anchor" href="#more-tiepoints"></a>
</h3>
<p>Specifying more tiepoints in the <code>data.frame</code> will give
more control over the exact placement of the colors. For example if we
want to clearly separate the values around 1 (population mean), then we
can tie more colors to values that just above and below the values</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfMoreTies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  z<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4</span>, <span class="fl">0.5</span>, <span class="fl">1</span>,  <span class="fl">1.5</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  color<span class="op">=</span><span class="fu"><a href="../reference/ramps.html">gradinv</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">dfMoreTies</span></span>
<span><span class="co">#&gt;      z   color</span></span>
<span><span class="co">#&gt; 1 -4.0 #33358A</span></span>
<span><span class="co">#&gt; 2  0.5 #76ACCE</span></span>
<span><span class="co">#&gt; 3  1.0 #FFF99A</span></span>
<span><span class="co">#&gt; 4  1.5 #E22C28</span></span>
<span><span class="co">#&gt; 5  6.0 #690720</span></span></code></pre></div>
<p>This can then be expanded to a full color ramp:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exMoreTies</span> <span class="op">&lt;-</span> <span class="fu">rampage</span><span class="fu">::</span><span class="fu"><a href="../reference/expand.html">expand</a></span><span class="op">(</span><span class="va">dfMoreTies</span>, n<span class="op">=</span><span class="fl">200</span><span class="op">)</span></span></code></pre></div>
<p>Which can be visualized with the <code>hist</code> function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">vals</span>, breaks<span class="op">=</span><span class="va">exMoreTies</span><span class="op">$</span><span class="va">breaks</span>, col<span class="op">=</span><span class="va">exMoreTies</span><span class="op">$</span><span class="va">col</span>, border<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span></code></pre></div>
<p><img src="rampage_files/figure-html/unnamed-chunk-12-1.png" width="672"></p>
<p>The exact placement of the colors are easily customizable by tweaking
the <code>z</code> values in the <code>data.frame</code> that is
expanded into the ramp. For instance, if we want the colorings to
reflect the values (e.g. 0 is more important than the mean):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfSkewed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  z<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>,  <span class="fl">1</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  color<span class="op">=</span><span class="fu"><a href="../reference/ramps.html">gradinv</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">dfSkewed</span></span>
<span><span class="co">#&gt;    z   color</span></span>
<span><span class="co">#&gt; 1 -4 #33358A</span></span>
<span><span class="co">#&gt; 2 -1 #76ACCE</span></span>
<span><span class="co">#&gt; 3  0 #FFF99A</span></span>
<span><span class="co">#&gt; 4  1 #E22C28</span></span>
<span><span class="co">#&gt; 5  6 #690720</span></span></code></pre></div>
<p>Expanding to a full color ramp:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exSkewed</span> <span class="op">&lt;-</span> <span class="fu">rampage</span><span class="fu">::</span><span class="fu"><a href="../reference/expand.html">expand</a></span><span class="op">(</span><span class="va">dfSkewed</span>, n<span class="op">=</span><span class="fl">200</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">vals</span>, breaks<span class="op">=</span><span class="va">exSkewed</span><span class="op">$</span><span class="va">breaks</span>, col<span class="op">=</span><span class="va">exSkewed</span><span class="op">$</span><span class="va">col</span>, border<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span></code></pre></div>
<p><img src="rampage_files/figure-html/unnamed-chunk-15-1.png" width="672"></p>
<p>See the package website for package-specific examples.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://palaeobiology.nat.fau.de/people/instructors/kocsis/" class="external-link">Adam T. Kocsis</a>, <a href="https://www.dfg.de/en/index.jsp" class="external-link"><img src="https://github.com/gplates/rgplates/blob/devel/pkgdown/assets/dfg.png?raw=true" alt="dfg" width="80"></a>, <a href="https://www.gzn.nat.fau.eu/" class="external-link"><img src="https://github.com/gplates/rgplates/blob/devel/pkgdown/assets/GeoZentrum.svg?raw=true" alt="geozentrum" width="80"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
